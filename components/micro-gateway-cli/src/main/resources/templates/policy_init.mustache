import ballerina/log;
import ballerina/runtime;
import wso2/gateway;

future<()> ftr = start initThrottlePolicies();

function initThrottlePolicies() {
    future<()> throttleInitFuture = gateway:getInitThrottleSubscriptionFuture();
    wait throttleInitFuture;
    log:printDebug("Throttle streams initialized.");

{{#policyInitNames}}
    future<()> {{.}}Ftr = start {{.}}();
{{/policyInitNames}}
    log:printDebug("Throttle policies initialized.");
}

function getDeployedPolicies() returns map<boolean> {
    return { {{#policyNames}}"{{.}}":true{{#unless @last}},{{/unless}}{{/policyNames}} };
}